(function(t){function e(e){for(var i,a,c=e[0],r=e[1],l=e[2],u=0,h=[];u<c.length;u++)a=c[u],o[a]&&h.push(o[a][0]),o[a]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);d&&d(e);while(h.length)h.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,c=1;c<n.length;c++){var r=n[c];0!==o[r]&&(i=!1)}i&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},o={app:0},s=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=r;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},2856:function(t,e,n){},"340e":function(t,e,n){"use strict";var i=n("6644"),o=n.n(i);o.a},"39e1":function(t,e,n){"use strict";var i=n("f226"),o=n.n(i);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("h1",[t._v("simple flowchart")]),n("simple-flowchart",{attrs:{horizontalStyle:t.horizontalStyle,scene:t.scene,height:800},on:{"update:horizontalStyle":function(e){t.horizontalStyle=e},"update:scene":function(e){t.scene=e},"not-allowed":t.teste,nodeDelete:t.nodeDelete,linkBreak:t.linkBreak,linkAdded:t.linkAdded,canvasClick:t.canvasClick}})],1)},s=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{key:t.keyFlowChart,staticClass:"flowchart-container",on:{mousemove:t.handleMove,mouseup:t.handleUp,mousedown:t.handleDown}},[n("div",{staticClass:"zoom-container"},[t.consultOn?t._e():n("div",{staticClass:"tool-wrapper"},t._l(t.nodeCategory,function(e,i){return n("div",{key:i,attrs:{value:i},on:{click:function(n){t.chosedNodes(e,i)}}},[0==i&&t.end?n("div",{staticClass:"config-tool "},[n("div",{staticClass:"button-end"})]):t._e(),1==i&&t.endWorkflow?n("div",{staticClass:" config-tool"},[t._m(0,!0)]):t._e()])})),n("svg",{attrs:{width:"100%",height:t.height+"px",tabindex:"0"}},t._l(t.lines,function(e){return n("flowchart-link",t._b({key:"link"+e.id,attrs:{state:e.state,consultMode:t.consultOn,linking:t.action.linking,selectedLine:e.selectedLine,label:e.label},on:{"update:label":[function(n){t.$set(e,"label",n)},function(n){t.labelUpdate(e,n)}],changeLineSelect:function(n){t.linkLabel(e,n)},idLink:function(e){t.linkSelected(e)}}},"flowchart-link",e,!1,!0))})),t._l(t.scene.nodes,function(e,i){return n("flowchart-node",t._b({key:"node"+i,attrs:{options:t.nodeOptions,consultMode:t.consultOn},on:{"update:type":function(t){e.type=t},linkingStart:function(n){t.linkingStart(e.id,e.type)},linkingStop:function(n){t.linkingStop(e.id,e.type)},nodeSelected:function(n){t.nodeSelected(e.id,n,e)},nodeTransition:function(e){t.nodeTransition()}}},"flowchart-node",e,!1,!0))})],2)])},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"button-end-workflow"},[n("div")])}],r=(n("f751"),n("20d6"),n("8afe")),l=(n("7514"),n("ac6a"),n("9393")),d=(n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{on:{dblclick:t.changeLink,click:function(e){t.linkSelect(e)}}},[n("defs",[n("marker",{attrs:{id:"arrow",viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"4",markerHeight:"4",orient:"auto-start-reverse"}},[n("path",{attrs:{d:"M 0 0 L 10 5 L 0 10 z"}})])]),n("path",{class:t.classeComputada,attrs:{d:t.dAttr,"stroke-width":"5.73205",fill:"none","marker-end":"url(#arrow)"},on:{click:function(e){t.select=!t.select}}}),n("a",[n("text",{attrs:{id:""+(t.text+t.id),"text-anchor":"middle",transform:t.horizontal?t.textTransformHorizontal:t.textTransform,"font-size":"15","font-weight":"600"}},[t._v("\n      "+t._s(t.text)+"\n    ")])])])}),u=[],h=new i["a"],f={name:"FlowchartLink",props:{label:{type:String,default:function(){return this.text}},start:{type:Array,default:function(){return[0,0]}},end:{type:Array,default:function(){return[0,0]}},type:{type:String,default:function(){return"Default"}},id:Number,horizontal:Boolean,linking:Boolean,selectedLine:{type:Boolean,default:!1},consultMode:{type:Boolean,default:!1},dragLine:Number},data:function(){return{text:this.label,line:this.dragLine,select:this.selectedLine,show:{delete:!1}}},methods:{linkSelect:function(){var t=this;h.$emit("linkSelected",this.id),t.$emit("idLink",this.id),t.$emit("nodeSelected",null)},handleMouseOver:function(){this.id&&(this.show.delete=!0)},handleMouseLeave:function(){this.show.delete=!1,this.select=!1},caculateCenterPoint:function(){var t=(this.end[0]-this.start[0])/2,e=(this.end[1]-this.start[1])/2;return this.end[0]<this.start[0]?[this.start[0]+t,this.start[1]+90]:[this.start[0]+t,this.start[1]+e]},caculateBottomPoint:function(){var t=(this.end[0]-this.start[0])/2,e=(this.end[1]-this.start[1])/2;return[this.start[0]+t,e]},caculateRotation:function(){var t=-Math.atan2(this.end[0]-this.start[0],this.end[1]-this.start[1]),e=180*t/Math.PI;return e<0?e+360:e},changeLink:function(){if(!this.consultMode){var t=this.text;this.text=prompt(),null==this.text&&(this.text=t)}},deleteLink:function(){this.$emit("deleteLink")}},watch:{text:function(t){this.$emit("update:label",t)},label:function(t){this.text=t}},computed:{classeComputada:function(){return this.select?"path selected":"path"},arrowStyle:function(){return{stroke:"rgb(255, 136, 85)",strokeWidth:5.73205,fill:"none"}},arrowTransform:function(){var t=this.caculateBottomPoint(),e=Object(l["a"])(t,2),n=e[0],i=e[1],o=this.caculateRotation();return"translate(".concat(n,", ").concat(i,") rotate(").concat(o,")")},arrowTransformHorizontal:function(){var t=this.caculateCenterPoint(),e=Object(l["a"])(t,2),n=e[0],i=e[1];this.caculateRotation();return"translate(".concat(n,", ").concat(i,")")},textTransform:function(){var t=this.caculateCenterPoint(),e=Object(l["a"])(t,2),n=e[0],i=e[1],o=n,s=this.caculateRotation();return"translate(".concat(o,", ").concat(i,") rotate(").concat(s," )")},textTransformHorizontal:function(){var t=this.caculateCenterPoint(),e=Object(l["a"])(t,2),n=e[0],i=e[1],o=n;this.caculateRotation();return"translate(".concat(o,", ").concat(i,")")},changeTransform:function(){var t=this.caculateCenterPoint(),e=Object(l["a"])(t,2),n=e[0],i=e[1],o=i+35,s=this.caculateRotation();return"translate(".concat(n,", ").concat(o,") rotate(").concat(s,")")},changeTransformHorizontal:function(){var t=this.caculateCenterPoint(),e=Object(l["a"])(t,2),n=e[0],i=e[1],o=i;return"translate(".concat(n,", ").concat(o,")")},compText:function(){},dAttr:function(){if(this.horizontal){var t=this.start[0],e=this.start[1]-3,n=this.end[0],i=this.end[1]+30,o=t,s=e,a=n,c=i,r=(o+a)/2;if(o<a){if("Action"===this.type||"Join"===this.type||"Decision"===this.type)return"firefox"===this.$parent.browser?"M".concat(t," ").concat(e-45,"  H ").concat(Math.round(r)," ").concat(r,"  V ").concat(c," ").concat(i," H ").concat(n-70):this.$parent.action.linking?"M".concat(t," ").concat(e-45,"  H ").concat(Math.round(r)," ").concat(r,"  V ").concat(c," ").concat(i," H ").concat(n):"M ".concat(t,", ").concat(e-45," H ").concat(Math.round(r),",").concat(r,", V ").concat(c,",").concat(i," H ").concat(n-70);if("End"===this.type||"endWorkflow"===this.type)return"firefox"===this.$parent.browser?"M ".concat(t," ").concat(e," H ").concat(Math.round(r)," ").concat(r," V ").concat(c," ").concat(i-5," H ").concat(n-40):this.$parent.action.linking?"M".concat(t," ").concat(e,"  H ").concat(Math.round(r)," ").concat(r,"  V ").concat(c," ").concat(i," H ").concat(n," "):"M ".concat(t,", ").concat(e," H ").concat(Math.round(r),", ").concat(r,", V ").concat(c,", ").concat(i-50," H ").concat(n-60," ");if("firefox"===this.$parent.browser)return this.consultMode?"M ".concat(t," ").concat(e," H ").concat(Math.round(r)," ").concat(r," V ").concat(c," ").concat(i," H ").concat(n-70," "):this.$parent.action.linking?"M".concat(t," ").concat(e," H ").concat(Math.round(r)," ").concat(r," V ").concat(c-80," ").concat(i," H ").concat(n," "):"M".concat(t," ").concat(e," H ").concat(Math.round(r)," ").concat(r," V ").concat(c," ").concat(i," H ").concat(n-70," ");return this.consultMode?"M ".concat(t,", ").concat(e-45," H ").concat(Math.round(r),", ").concat(r,", V ").concat(c,", ").concat(i," H ").concat(n-70," "):this.$parent.action.linking?"M".concat(t," ").concat(e-45," H ").concat(Math.round(r)," ").concat(r," V ").concat(c-20," ").concat(i-20," H ").concat(n," "):"M ".concat(t,", ").concat(e-45," H ").concat(Math.round(r),", ").concat(r,", V ").concat(c,", ").concat(i," H ").concat(n-70," ")}e=this.start[1];var l=s+150,d=-100;return s<c&&s+d>c?"M".concat(o+20," ").concat(s-20," V").concat(this.dragLine?s+this.dragLine:l," H").concat(a+20," V").concat(c+52," "):s<c&&s-c>d?"M".concat(o+20," ").concat(s-40," V").concat(this.dragLine?s+this.dragLine:l," H").concat(a-20," V").concat(c+52," "):s<c&&s-c<d?"M".concat(o+20," ").concat(s-40," V").concat(this.dragLine?s+this.dragLine:l," H").concat(a+20," V").concat(c-44," "):s<c?"M".concat(o+20," ").concat(s-20," V").concat(this.dragLine?s+this.dragLine:l," H").concat(a," V").concat(c-45," "):"M".concat(o+20," ").concat(s-20," V").concat(this.dragLine?s+this.dragLine:l," H").concat(a+20," V").concat(c+52," ")}var u=this.start[0],h=this.start[1]-10,f=this.end[0],p=this.end[1],m=u,v=h+50,g=f,y=p-50;return"M ".concat(u,", ").concat(h," C ").concat(m,", ").concat(v,", ").concat(g,", ").concat(y,", ").concat(f,", ").concat(p)}},created:function(){var t=this;h.$on("linkSelected",function(e){t.select=t.id===e})},destroy:function(){h.$off("linkSelected")}},p=f,m=(n("340e"),n("2877")),v=Object(m["a"])(p,d,u,!1,null,"4063651a",null);v.options.__file="FlowchartLink.vue";var g=v.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.options.transition,expression:"options.transition"}],staticClass:"node-delete color"}),"Start"!==t.type&&"End"!==t.type&&"EndWorkflow"!==t.type?n("div",{staticClass:"flowchart-node flowchart-actions",class:{full:t.options.transition,selected:t.options.selected===t.id,horizontal:t.options.horizontal},style:t.nodeStyle,on:{mousedown:t.handleMousedown,mouseover:t.handleMouseOver,mouseleave:t.handleMouseLeave,dblclick:t.handleContent,contextmenu:function(e){t.menu(e,t.$data)}}},[t.show.menu?n("div",{staticClass:"contextMenu",attrs:{id:"context-menu"}},[n("ul",[n("li",{class:{active:"Decision"===t.actionType},on:{click:function(e){t.actionType="Decision"}}},[n("p",[t._v("Decisão")])]),n("li",{class:{active:"Join"===t.actionType},on:{click:function(e){t.actionType="Join"}}},[n("p",[t._v("Junção")])]),n("li",{class:{active:"Action"===t.actionType},on:{click:function(e){t.actionType="radio"}}},[n("p",[t._v("Ação")])])])]):t._e(),t.consultMode?t._e():n("div",{staticClass:"node-port node-input top",on:{mousedown:t.inputMouseDown,mouseup:t.inputMouseUp}}),t.consultMode?t._e():n("div",{staticClass:"node-port node-input left",on:{mousedown:t.inputMouseDown,mouseup:t.inputMouseUp}}),n("div",{staticClass:"node-main node-delete"},[t.consultMode?n("div",{staticClass:"node-type-state",class:{waiting:"WAITING"===t.state,pending:"PENDING"===t.state,approved:"APPROVED"===t.state,unapproved:"UNAPPROVED"===t.state,discontinued:"DISCONTINUED"===t.state,closed:"CLOSED"===t.state}},[n("div",{staticClass:"tooltip"},["WAITING"===t.state?n("span",{staticClass:"tooltiptext"},[t._v("Status: Aguardando\n          ")]):t._e(),"PENDING"===t.state?n("span",{staticClass:"tooltiptext"},[t._v("Status: Andamento\n          ")]):t._e(),"APPROVED"===t.state?n("span",{staticClass:"tooltiptext"},[t._v("Status: Concluida\n          ")]):t._e(),"UNAPPROVED"===t.state?n("span",{staticClass:"tooltiptext"},[t._v("Status: Cancelada\n          ")]):t._e(),"CLOSED"===t.state?n("span",{staticClass:"tooltiptext"},[t._v("Status: Encerrada\n          ")]):t._e(),"DISCONTINUED"===t.state?n("span",{staticClass:"tooltiptext"},[t._v("Status: Não Executada\n          ")]):t._e()])]):t._e(),"Join"===t.type?n("div",{staticClass:"node-type-icon"},[t._v("🞅")]):t._e(),"Decision"===t.type?n("div",{staticClass:"node-type-icon desicion-node"},[t._v("✖")]):t._e(),n("div",{staticClass:"node-label",domProps:{textContent:t._s(t.label)}}),t.consultMode&&t.activity?n("div",{staticClass:"begin-date"},[n("b",[t._v(" Ini:")]),t._v(" "+t._s(t.beginTime)+"\n      ")]):t._e(),t.consultMode&&t.activityType?n("div",{staticClass:"begin-date"},[n("b",[t._v(" Prazo:")]),t._v(" "+t._s(t.term)+" "),n("b",[t._v("hrs")])]):t._e(),t.consultMode&&t.activity?n("div",{staticClass:"end-date"},[n("b",[t._v(" Fim:")]),t._v(" "+t._s(t.endTime)+"\n      ")]):t._e()]),t.consultMode?t._e():n("div",{staticClass:"node-port node-output right",on:{mousedown:t.outputMouseDown}}),t.consultMode?t._e():n("div",{staticClass:"node-port node-output bottom",on:{mousedown:t.outputMouseDown}})]):t._e(),n("div",["Start"===t.type?n("div",{staticClass:"flowchart-node flowchart-start",class:{selected:t.options.selected===t.id,horizontal:t.options.horizontal},style:t.startStyle,on:{mousedown:t.handleMousedown,mouseover:t.handleMouseOver,mouseleave:t.handleMouseLeave}},[n("div",{staticClass:"node-main"},[n("div",{staticClass:"node-label"}),t.consultMode?t._e():n("div",{staticClass:"node-port node-output",on:{mousedown:t.outputMouseDown}})])]):t._e()]),"End"===t.type?n("div",{staticClass:"flowchart-node flowchart-end",class:{selected:t.options.selected===t.id,horizontal:t.options.horizontal},style:t.endStyle,on:{mousedown:t.handleMousedown,mouseover:t.handleMouseOver,mouseleave:t.handleMouseLeave}},[t.consultMode?t._e():n("div",{staticClass:"node-port node-input",on:{mousedown:t.inputMouseDown,mouseup:t.inputMouseUp}}),n("div",{staticClass:"node-main"})]):t._e(),"EndWorkflow"===t.type?n("div",{staticClass:"flowchart-node flowchart-end-workflow",class:{selected:t.options.selected===t.id,horizontal:t.options.horizontal},style:t.endStyle,on:{mousedown:t.handleMousedown,mouseover:t.handleMouseOver,mouseleave:t.handleMouseLeave}},[t.consultMode?t._e():n("div",{staticClass:"node-port node-input",on:{mousedown:t.inputMouseDown,mouseup:t.inputMouseUp}}),t._m(0)]):t._e()])},w=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node-main"},[n("div",{staticClass:"node-label"},[t._v("●")])])}],k={name:"FlowchartNode",props:{id:{type:Number,default:1e3,validator:function(t){return"number"===typeof t}},x:{type:Number,default:0,validator:function(t){return"number"===typeof t}},y:{type:Number,default:0,validator:function(t){return"number"===typeof t}},type:{type:String,default:"Default"},label:{type:String,default:"input name"},activityType:{type:Object},rotate:{type:Number,default:0},disabled:{type:Boolean,default:!1},consultMode:{type:Boolean,default:!1},state:{type:String,default:""},activity:{type:Object},options:{type:Object,default:function(){return{centerX:1024,scale:1,centerY:140,rotate:90,width:500}}}},data:function(){return{actionType:this.type,show:{delete:!1,fullContent:!1,menu:!1}}},watch:{type:function(t){this.$emit("update:type",t)},actionType:function(t){this.type=t}},mounted:function(){},computed:{term:function(){if(this.activityType)return this.activityType.term?this.activityType.term:""},beginTime:function(){if(this.activity){if(this.activity.departments[0].beginDate){var t=new Date(this.activity.departments[0].beginDate).toLocaleString();return t}return""}return""},endTime:function(){if(this.activity){if(this.activity.departments[0].endDate){var t=new Date(this.activity.departments[0].endDate).toLocaleString();return t}return""}return""},nodeStyle:function(){return this.show.fullContent?{top:this.options.centerY-2+this.y*this.options.scale+"px",left:this.options.centerX-160+this.x*this.options.scale+"px",transform:"scale(".concat(this.options.scale,")"),width:this.options.width+"px"}:{top:this.options.centerY-2+this.y*this.options.scale+"px",left:this.options.centerX-20+this.x*this.options.scale+"px",transform:"scale(".concat(this.options.scale,")"),width:"160px"}},startStyle:function(){return{top:this.options.centerY-2+this.y*this.options.scale+"px",left:this.options.centerX+15+this.x*this.options.scale+"px",transform:"scale(".concat(this.options.scale,")")}},endStyle:function(){return{top:this.options.centerY+this.y*this.options.scale+"px",left:this.options.centerX+15+this.x*this.options.scale+"px",transform:"scale(".concat(this.options.scale,")")}}},methods:{menu:function(t){var e=this;e.consultMode||(0===e.$parent.scene.links.length?e.findElementLink(t):e.$parent.scene.links.forEach(function(n){var i=e.$parent.scene.links.filter(function(t){return t.to===e.id}),o=e.$parent.scene.links.filter(function(t){return t.from===e.id});return void 0===o&&null===o||0!==o.length||0!==i.length?document.oncontextmenu=function(){return!1}:(document.oncontextmenu=function(){return!0},e.findElementLink(t))}))},findElementLink:function(t){var e=this;t.preventDefault(),e.show.menu=!0,window.addEventListener("click",function(){e.show.menu=!1})},handleContent:function(){this.show.fullContent?(this.$emit("nodeTransition"),this.show.fullContent=!1,this.$emit("canvasClick")):(this.$emit("nodeTransition"),this.show.fullContent=!0)},handleMousedown:function(t){var e=t.target||t.srcElement;e.className.indexOf("node-input")<0&&e.className.indexOf("node-output")<0&&this.$emit("nodeSelected",t),t.preventDefault()},handleMouseOver:function(){this.show.delete=!0},handleMouseLeave:function(){this.show.delete=!1},outputMouseDown:function(t){this.$emit("linkingStart"),t.preventDefault()},inputMouseDown:function(t){t.preventDefault()},inputMouseUp:function(t){this.$emit("linkingStop"),t.preventDefault()}}},b=k,x=(n("39e1"),Object(m["a"])(b,y,w,!1,null,"0ea89c62",null));x.options.__file="FlowchartNode.vue";var M=x.exports;function _(t){var e=t.getBoundingClientRect(),n=window.pageYOffset,i=window.pageXOffset,o=e.top+n,s=e.left+i;return{top:Math.round(o),left:Math.round(s)}}function L(t,e){var n=e.pageX||e.clientX+document.documentElement.scrollLeft,i=e.pageY||e.clientY+document.documentElement.scrollTop,o=_(t),s=n-o.left,a=i-o.top;return[s,a]}var C={name:"VueFlowchart",props:{nodesAction:{type:Object,default:function(){return{}}},scene:{type:Object,default:function(){return{centerX:1024,scale:1,centerY:140,nodes:[],links:[]}}},height:{type:Number,default:400},horizontalStyle:{type:Boolean,default:!1},consult:{type:Boolean,default:!1},activeNode:{type:Object,required:!1},end:{type:Boolean,default:!0},endWorkflow:{type:Boolean,default:!0}},data:function(){return{newNodeType:0,newNodeLabel:"",consultOn:this.consult,keyFlowChart:1,browser:"",nodeCategory:["End","EndWorkflow"],action:{linking:!1,dragging:!1,scrolling:!1,selected:0,transition:!1},item:{text:""},mouse:{x:0,y:0,lastX:0,lastY:0},offset:0,draggingLink:null,selectedLine:null,idSelectedLine:0,selectedNode:this.nodeSelected,rootDivOffset:{top:0,left:0}}},components:{FlowchartLink:g,FlowchartNode:M},watch:{selectedNode:function(){this.$emit("update:activeNode",this.selectedNode)}},computed:{nodeOptions:function(){return{centerY:this.scene.centerY,centerX:this.scene.centerX,scale:this.scene.scale,offsetTop:this.rootDivOffset.top,offsetLeft:this.rootDivOffset.left,selected:this.selectedNode.id,width:500,transition:this.action.transition,horizontal:this.horizontalStyle}},lines:function(){var t=this,e=this.scene.links.map(function(e){var n,i,o,s,a,c,r=t.findNodeWithID(e.from),d=t.findNodeWithID(e.to);n=t.scene.centerX+r.x,i=t.scene.centerY+r.y;var u=t.getPortPosition("bottom",n,i),h=Object(l["a"])(u,2);s=h[0],o=h[1],n=t.scene.centerX+d.x,i=t.scene.centerY+d.y;var f=t.getPortPosition("top",n,i),p=Object(l["a"])(f,2);return a=p[0],c=p[1],{start:[s,o],end:[a,c],id:e.id,label:e.label,state:e.state,from:r,horizontal:t.horizontalStyle,dragLine:t.offset,selectedLine:e.selectedLine,type:e.type}});if(this.draggingLink){var n,i,o,s,a=this.findNodeWithID(this.draggingLink.from);n=this.scene.centerX+a.x,i=this.scene.centerY+a.y;var c=this.getPortPosition("bottom",n,i),r=Object(l["a"])(c,2);s=r[0],o=r[1],e.push({start:[s,o],end:[this.draggingLink.mx,this.draggingLink.my],horizontal:this.horizontalStyle,dragLine:0})}return e}},mounted:function(){var t=this;this.rootDivOffset.top=this.$el?this.$el.offsetTop:0,this.rootDivOffset.left=this.$el?this.$el.offsetLeft:0,window.addEventListener("keydown",function(e){var n=e.which||e.keyCode;46===n&&t.removeItems()}),document.oncontextmenu=function(){return!1},this.identific_nav()},methods:{labelUpdate:function(t,e){this.scene.links.forEach(function(n){n.id===t.id&&(n.label=e)}),this.keyFlowChart=this.keyFlowChart+1},removeItems:function(){if(!this.consultOn){if(0!==this.action.selected)return"Start"!==this.selectedNode.type?this.deleteNodeButtom():void 0;if(0===this.idSelectedLine)return;this.deleteLineButtom()}},identific_nav:function(){var t=navigator.userAgent.toLowerCase(),e="";-1!=t.indexOf("msie")?e="msie":-1!=t.indexOf("opera")?e="opera":-1!=t.indexOf("mozilla")?-1!=t.indexOf("firefox")?e="firefox":-1!=t.indexOf("firefox")?e="mozilla":-1!=t.indexOf("chrome")&&(e="chrome"):alert("Navegador desconhecido!"),this.browser=e},deleteLineButtom:function(){this.linkDelete(this.idSelectedLine),this.idSelectedLine=0},deleteNodeButtom:function(){this.nodeDelete(this.selectedNode.id),this.selectedNode={},this.action.selected=0},nodeDelete:function(t){if(!this.consultOn){var e=this.scene.nodes.find(function(t){return t.id});e["disabled"]=!1,this.scene.nodes=this.scene.nodes.filter(function(e){return e.id!==t}),this.scene.links=this.scene.links.filter(function(e){return e.to!==t}),this.scene.links=this.scene.links.filter(function(e){return e.from!==t}),this.$emit("nodeDelete",t)}},linkLabel:function(t,e){if(!this.consultOn){var n=this.scene.links.find(function(e){return e.id===t.id});n&&(n.label=e)}},linkSelected:function(t){if(!this.consultOn){console.log(t);var e=this;e.idSelectedLine=t,e.selectedNode={},e.action.selected=0}},chosedNodes:function(t,e){this.newNodeType=e,this.addNode()},addNode:function(){var t=Math.max.apply(Math,this.scene.nodes.map(function(t){return t.id}));this.scene.nodes.push({id:t+1,x:-400,y:50,type:this.nodeCategory[this.newNodeType],label:this.newNodeLabel?this.newNodeLabel:"test".concat(t+1),term:""})},findNodeWithID:function(t){return this.scene.nodes.find(function(e){return t===e.id})},getPortPosition:function(t,e,n){return"top"===t?[e+40,n]:"bottom"===t?[e+40,n+80]:void 0},linkingStart:function(t,e){this.action.linking=!0,this.draggingType=e,this.draggingLink={from:t,mx:0,my:0,dragLine:0}},linkingStop:function(t,e){var n=this;if(this.draggingLink&&this.draggingLink.from!==t){var i=this.scene.links.find(function(e){return e.from===n.draggingLink.from&&e.to===t});if(!i){var o=Math.max.apply(Math,[0].concat(Object(r["a"])(this.scene.links.map(function(t){return t.id})))),s={id:o+1,from:this.draggingLink.from,to:t,type:e,selectedLine:!1,label:""},a=this.scene.nodes.find(function(t){return t.id===n.draggingLink.from});a.disabled;"Start"===this.draggingType&&("End"===e||"EndWorkflow"===e?this.$emit("not-allowed"):(a["disabled"]=!0,this.scene.links.push(s),this.$emit("linkAdded",s))),"Action"===this.draggingType&&(this.scene.links.push(s),this.$emit("linkAdded",s)),"Join"===this.draggingType&&(a["disabled"]=!0,this.scene.links.push(s),this.$emit("linkAdded",s)),"Decision"===this.draggingType&&(this.scene.links.push(s),this.$emit("linkAdded",s))}}this.draggingLink=null},linkDelete:function(t){if(!this.consultOn){var e=this.scene.links.find(function(e){return e.id===t});this.scene.nodes.find(function(t){return t.id===e.from}),this.scene.nodes.find(function(t){return t.id===e.to});e&&(this.scene.links=this.scene.links.filter(function(e){return e.id!==t}),this.selectedLine={},this.$emit("linkBreak",e))}},nodeTransition:function(){var t=this;this.action.transition=!this.action.transition,setTimeout(function(){t.action.transition=!1},500)},nodeSelected:function(t,e,n){this.selectedNode=n,this.action.selected=n.id,this.action.dragging=t,this.$emit("nodeClick",t),this.mouse.lastX=e.pageX||e.clientX+document.documentElement.scrollLeft,this.mouse.lastY=e.pageY||e.clientY+document.documentElement.scrollTop},handleMove:function(t){if(this.action.linking){var e=L(this.$el,t),n=Object(l["a"])(e,2);this.mouse.x=n[0],this.mouse.y=n[1];var i=[this.mouse.x,this.mouse.y];this.draggingLink.mx=i[0],this.draggingLink.my=i[1]}if(this.action.dragging){this.mouse.x=t.pageX||t.clientX+document.documentElement.scrollLeft,this.mouse.y=t.pageY||t.clientY+document.documentElement.scrollTop;var o=this.mouse.x-this.mouse.lastX,s=this.mouse.y-this.mouse.lastY;this.mouse.lastX=this.mouse.x,this.mouse.lastY=this.mouse.y,this.moveSelectedNode(o,s)}if(this.action.scrolling){var a=L(this.$el,t),c=Object(l["a"])(a,2);this.mouse.x=c[0],this.mouse.y=c[1];var r=this.mouse.x-this.mouse.lastX,d=this.mouse.y-this.mouse.lastY;this.mouse.lastX=this.mouse.x,this.mouse.lastY=this.mouse.y,this.scene.centerX+=r,this.scene.centerY+=d}},handleUp:function(t){var e=t.target||t.srcElement;this.$el.contains(e)&&("string"!==typeof e.className||e.className.indexOf("node-input")<0)&&(this.draggingLink=null),this.action.linking=!1,this.action.dragging=null,this.action.scrolling=!1},handleDown:function(t){var e=t.target||t.srcElement;if((e===this.$el||e.matches("svg, svg *"))&&1===t.which){this.action.scrolling=!0;var n=L(this.$el,t),i=Object(l["a"])(n,2);this.mouse.lastX=i[0],this.mouse.lastY=i[1],this.action.selected=null}this.$emit("canvasClick",t)},moveSelectedLine:function(t){var e=t/this.scene.scale;this.offset=e},moveSelectedNode:function(t,e){var n=this,i=this.scene.nodes.findIndex(function(t){return t.id===n.action.dragging}),o=this.scene.nodes[i].x+t/this.scene.scale,s=this.scene.nodes[i].y+e/this.scene.scale;this.$set(this.scene.nodes,i,Object.assign(this.scene.nodes[i],{x:o,y:s}))}}},S=C,O=(n("7d31"),Object(m["a"])(S,a,c,!1,null,"7ae87d91",null));O.options.__file="SimpleFlowchart.vue";var D=O.exports,N={name:"app",components:{SimpleFlowchart:D},data:function(){return{horizontalStyle:!0,scene:{centerX:1024,centerY:140,scale:1,nodes:[{id:9999999,x:-700,y:-139,type:"Start",label:"Start",disabled:!1,term:""},{id:2,x:-700,y:0,type:"Join",label:"test1",disabled:!1,state:"PENDING",term:""},{id:5987569,x:-700,y:0,type:"Action",label:"Mano",disabled:!1,term:"",width:400,activity:{departments:[{beginDate:1590608528e3}]}},{id:60,x:-700,y:0,type:"Action",label:"Este e um texto gigante para 5 linhas, gigante para 5 linhas, gigante para 5 linhas ",disabled:!1,width:400},{id:52,x:-700,y:0,type:"Action",label:"linhas ",disabled:!1,term:"",width:400},{id:3248,x:-357,y:80,type:"Action",term:"",label:"decisáo",disabled:!1},{id:5796,x:-557,y:80,type:"Action",label:"test1",term:"",disabled:!1},{id:55796,x:-557,y:80,type:"Action",term:"",label:"test5",disabled:!1},{id:556796,x:-557,y:80,type:"Action",term:"",label:"test6",disabled:!1}],links:[{from:9999999,to:2,id:1},{from:2,to:5987569,id:2},{from:5987569,to:60,id:3}]}}},methods:{teste:function(){alert("Operação não permitida app")},canvasClick:function(t){},nodeClick:function(t){},nodeDelete:function(t){},linkBreak:function(t){},linkAdded:function(t){}}},$=N,T=(n("5c0b"),Object(m["a"])($,o,s,!1,null,null,null));T.options.__file="App.vue";var E=T.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(E)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var i=n("2856"),o=n.n(i);o.a},6644:function(t,e,n){},"7d31":function(t,e,n){"use strict";var i=n("7e89"),o=n.n(i);o.a},"7e89":function(t,e,n){},f226:function(t,e,n){}});
//# sourceMappingURL=app.d18bae62.js.map